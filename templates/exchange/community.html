{% extends "base.html" %}

{% block title %}Community{% endblock %}
{% block subtitle %}Stories, tips, and upcycling ideas{% endblock %}

{% block main %}
<div class="container">
    <h2>Community Feed</h2>

    {% if user.is_authenticated %}
        <h3>Share something</h3>
        <form method="post">
            {% csrf_token %}
            <p>
                <label for="id_title">Title</label>
                <input type="text" id="id_title" name="title">
            </p>
            <p>
                <label for="id_body">Story / Tip</label>
                <textarea id="id_body" name="body" rows="4"></textarea>
            </p>
            <button type="submit" class="btn">Post</button>
        </form>
        <hr>
    {% else %}
        <p><a href="{% url 'login' %}">Log in</a> to share your eco-swap stories.</p>
    {% endif %}

    {% if posts %}
        <ul>
            {% for post in posts %}
                <li>
                    <strong>{{ post.title }}</strong>
                    by {{ post.author.username }} on {{ post.created_at|date:"M d, Y" }}<br>
                    {{ post.body }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No community posts yet. Start the conversation!</p>
    {% endif %}
</div>
{% endblock %}

