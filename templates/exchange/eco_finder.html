{% extends "base.html" %}

{% block title %}Eco Finder{% endblock %}
{% block subtitle %}Find recycling, repair, and donation hubs{% endblock %}

{% block main %}
<div class="container">
    <h2>Eco Infrastructure Near You</h2>
    <form method="get" class="form-inline">
        <label for="city">City</label>
        <input type="text" id="city" name="city" value="{{ selected_city }}">

        <label for="type">Type</label>
        <select id="type" name="type">
            <option value="">Any</option>
            <option value="recycling" {% if selected_type == "recycling" %}selected{% endif %}>Recycling Center</option>
            <option value="repair" {% if selected_type == "repair" %}selected{% endif %}>Repair Shop</option>
            <option value="donation" {% if selected_type == "donation" %}selected{% endif %}>Donation Hub</option>
            <option value="other" {% if selected_type == "other" %}selected{% endif %}>Other</option>
        </select>

        <button type="submit" class="btn">Search</button>
    </form>

    <hr>

    {% if places %}
        <ul>
            {% for place in places %}
                <li>
                    <strong>{{ place.name }}</strong>
                    â€“ {{ place.get_place_type_display }}<br>
                    {{ place.address }}{% if place.city %}, {{ place.city }}{% endif %}<br>
                    {% if place.website %}
                        <a href="{{ place.website }}" target="_blank">Website</a>
                    {% endif %}
                    {% if place.description %}
                        <br>{{ place.description }}
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No eco-locations found for this filter yet.</p>
    {% endif %}
</div>
{% endblock %}

